{"version":3,"sources":["webpack:///./src/views/search/components/search-result.vue?bc08","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/views/search/index.vue?e80d","webpack:///./src/views/search/index.vue?b166","webpack:///./src/views/search/components/search-suggestion.vue?d6d3","webpack:///./src/api/search.js","webpack:///src/views/search/components/search-suggestion.vue","webpack:///./src/views/search/components/search-suggestion.vue?529f","webpack:///./src/views/search/components/search-suggestion.vue","webpack:///./src/views/search/components/search-history.vue?e47a","webpack:///src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-history.vue?3aca","webpack:///./src/views/search/components/search-history.vue","webpack:///./src/views/search/components/search-result.vue?fadf","webpack:///src/views/search/components/search-result.vue","webpack:///./src/views/search/components/search-result.vue?4990","webpack:///./src/views/search/components/search-result.vue","webpack:///src/views/search/index.vue","webpack:///./src/views/search/index.vue?2b70","webpack:///./src/views/search/index.vue"],"names":["DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","this","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","onSearch","searchText","$router","back","isResultShow","model","value","callback","$$v","expression","searchHistories","staticRenderFns","_l","str","$emit","domProps","_s","highight","slot","getSearchResult","params","request","methods","url","headers","token","store","state","user","component","_v","isDeleteShow","history","onDelete","directives","name","rawName","finished","onLoad","loading","article","title","news_id","id"],"mappings":"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","file":"js/chunk-2f8ae994.ea5bf73c.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=style&index=0&id=42ceb91e&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=style&index=0&id=42ceb91e&scoped=true&lang=less&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5dfc90e9&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5dfc90e9&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search_container\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"placeholder\":\"请输入搜索关键词\",\"show-action\":\"\",\"shape\":\"round\",\"background\":\"#3296fa\"},on:{\"search\":function($event){return _vm.onSearch(_vm.searchText)},\"cancel\":function($event){return _vm.$router.back()},\"focus\":function($event){_vm.isResultShow=false}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),(_vm.isResultShow)?_c('search-result',{attrs:{\"search-text\":_vm.searchText}}):(_vm.searchText)?_c('search-suggestion',{attrs:{\"search-text\":_vm.searchText},on:{\"search\":_vm.onSearch}}):_c('search-history',{attrs:{\"search-histories\":_vm.searchHistories},on:{\"search\":_vm.onSearch,\"update-histories\":function($event){_vm.searchHistories = $event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-suggestion\"},_vm._l((_vm.suggestions),function(str,index){return _c('van-cell',{key:index,attrs:{\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search',str)}}},[_c('div',{attrs:{\"slot\":\"title\"},domProps:{\"innerHTML\":_vm._s(_vm.highight(str))},slot:\"title\"})])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\r\n * 搜索相关请求模块\r\n */\r\n\r\nimport request from '@/utils/request'\r\nimport store from '@/store/'\r\n/**\r\n * 获取搜索联想建议\r\n */\r\n\r\n// export const getSearchSuggestions = q => {\r\n//     return request({\r\n//         methods: 'GET',\r\n//         url:'/app/v1_0/suggestion',\r\n//         params: {\r\n//             q //联想建议的关键词\r\n//         }\r\n//     })\r\n// }\r\n/**\r\n * 获取搜索结果\r\n */\r\n\r\nexport const getSearchResult = (params) => {\r\n    return request({\r\n        methods: 'GET',\r\n        url:'/api/v1/news/search',\r\n        params,\r\n        headers: {\r\n            token: `${store.state.user.token}`\r\n        }\r\n    })\r\n}\r\n/**\r\n * 获取用户搜索历史\r\n */\r\n// export const getSearchHistories = () => {\r\n//     return request({\r\n//         methods: 'GET',\r\n//         url:'/app/v1_0/search/histories'\r\n//     })\r\n// }","<template>\r\n  <div class=\"search-suggestion\">\r\n      <van-cell\r\n        icon=\"search\"\r\n        v-for=\"(str,index) in suggestions\"\r\n        :key=\"index\"\r\n        @click=\"$emit('search',str)\"\r\n      >\r\n        <div slot=\"title\" v-html=\"highight(str)\"></div>\r\n      </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchSuggestions } from '@/api/search'\r\nimport { debounce } from \"lodash\"\r\nexport default {\r\n    name:'search-suggestion',\r\n    data() {\r\n        return {\r\n            suggestions: [] //联想的数组\r\n        }\r\n    },\r\n    props: {\r\n        searchText: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    // watch: {\r\n    //     //只要输入框的值发生了变化就会执行以下方法\r\n    //     // searchText() {\r\n    //     //     console.log('hello');\r\n    //     // }\r\n    //     searchText: {\r\n    //         //每输入一次就会调用一次接口\r\n    //         handler: debounce(async function() {\r\n    //             const { data } = await getSearchSuggestions(this.searchText);\r\n    //             this.suggestions = data.data.options\r\n    //         },200),\r\n    //         immediate:true //这么写以后会在数据变化马上监听，就算这个组件还没渲染出来，主要去除第一次监听不到数值的情况\r\n    //     }\r\n            \r\n    // },\r\n    methods: {\r\n        highight(str) {\r\n            // console.log(str);//返回的就是查出来的每一项数据\r\n            // /this.searchText/错的写法\r\n            return str.replace(new RegExp(this.searchText,'gi'),`<span style=\"color: #3296fa\">${this.searchText}</span>`)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-suggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-suggestion.vue?vue&type=template&id=5d8462e5&scoped=true&\"\nimport script from \"./search-suggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./search-suggestion.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d8462e5\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-history\"},[_c('van-cell',{attrs:{\"title\":\"历史记录\"}},[(_vm.isDeleteShow)?_c('div',[_c('span',{on:{\"click\":function($event){return _vm.$emit('update-histories',[])}}},[_vm._v(\"全部删除\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.isDeleteShow = false}}},[_vm._v(\"完成\")])]):_c('van-icon',{attrs:{\"name\":\"delete\"},on:{\"click\":function($event){_vm.isDeleteShow = true}}})],1),_vm._l((_vm.searchHistories),function(history,index){return _c('van-cell',{key:index,attrs:{\"title\":history},on:{\"click\":function($event){return _vm.onDelete(history,index)}}},[_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isDeleteShow),expression:\"isDeleteShow\"}],attrs:{\"name\":\"close\"}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search-history\">\r\n      <van-cell\r\n        title=\"历史记录\"\r\n      >\r\n       <div v-if=\"isDeleteShow\">\r\n           <span @click=\"$emit('update-histories',[])\">全部删除</span>\r\n           &nbsp;&nbsp;&nbsp;\r\n           <span @click=\"isDeleteShow = false\">完成</span>\r\n       </div>\r\n       <van-icon \r\n            name=\"delete\"\r\n            v-else\r\n            @click=\"isDeleteShow = true\"\r\n            ></van-icon>\r\n      </van-cell>\r\n      <van-cell \r\n        :title=\"history\" \r\n        v-for=\"(history,index) in searchHistories\"\r\n        :key=\"index\"\r\n        @click=\"onDelete(history,index)\"\r\n        >\r\n          <van-icon name=\"close\" v-show=\"isDeleteShow\"></van-icon>\r\n      </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { setItem,getItem } from '@/utils/stroage'\r\nimport { getSearchHistories } from '@/api/search'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n    name: 'search-history',\r\n    props: {\r\n        searchHistories: {\r\n            type:Array,\r\n            required:true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            isDeleteShow: false\r\n        }\r\n    },\r\n    methods: {\r\n        onDelete(history,index) {\r\n            //如果是删除状态，则执行删除\r\n            if(this.isDeleteShow) {\r\n               this.searchHistories.splice(index,1)\r\n               //持久化处理\r\n               //1.修改本地数据\r\n               //2.请求接口删除线上\r\n               //无论是否登录都持久到本地\r\n                setItem('search-histories',this.searchHistories)\r\n                return\r\n            }\r\n\r\n            //非删除状态，展示搜索结果\r\n            this.$emit('search',history)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-history.vue?vue&type=template&id=8cf52174&scoped=true&\"\nimport script from \"./search-history.vue?vue&type=script&lang=js&\"\nexport * from \"./search-history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8cf52174\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search-result\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(article,index){return _c('van-cell',{key:index,attrs:{\"title\":article.title,\"to\":{ name: 'article', params: { news_id: article.id }}}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"search-result\">\r\n        <van-list\r\n            v-model=\"loading\"\r\n            :finished=\"finished\"\r\n            finished-text=\"没有更多了\"\r\n            @load=\"onLoad\"\r\n        >\r\n            <van-cell \r\n                v-for=\"(article,index) in list\" \r\n                :key=\"index\" \r\n                :title=\"article.title\" \r\n                :to=\"{ name: 'article', params: { news_id: article.id }}\"/>\r\n        </van-list>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchResult } from '@/api/search'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n    name: 'search-result',\r\n    data() {\r\n        return {\r\n            list: [],\r\n            loading: false,\r\n            finished: false,\r\n            page:1,\r\n            perPage:10\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState(['user'])\r\n    },\r\n    props: {\r\n        searchText: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    methods: {\r\n        async onLoad() {\r\n        //1.请求获取数据\r\n            const { data } = await getSearchResult({\r\n                page: this.page,  //页码\r\n                key: this.searchText, //搜索的字符\r\n                token: this.user.token\r\n            });\r\n        //2.数据放到列表中\r\n            //  console.log(data)\r\n            // const { results } = data.content;\r\n            this.list.push(...data);\r\n        //3.关闭本次的loading\r\n            this.loading = false;\r\n        //4.判断是否还有数据有则更新下一页\r\n            if(data.length) {\r\n                //如果有就更新下一页的数据\r\n                this.page++\r\n            }else {\r\n                this.finished = true;//关闭加载更多\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    .search-result {\r\n        position: fixed;\r\n        left: 0;\r\n        right: 0;\r\n        top: 54px;\r\n        bottom: 0;\r\n        overflow-y: auto;\r\n    }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search-result.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-result.vue?vue&type=template&id=42ceb91e&scoped=true&\"\nimport script from \"./search-result.vue?vue&type=script&lang=js&\"\nexport * from \"./search-result.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-result.vue?vue&type=style&index=0&id=42ceb91e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42ceb91e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"search_container\">\r\n      <!-- 导航栏 -->\r\n      <!-- 在 van-search 外层增加 form 标签，且 action 不为空，即可在 iOS 输入法中显示搜索按钮。 -->\r\n      <form action=\"/\">\r\n        <van-search \r\n            v-model=\"searchText\" \r\n            placeholder=\"请输入搜索关键词\"\r\n            show-action\r\n            shape=\"round\"\r\n            background=\"#3296fa\"\r\n            @search=\"onSearch(searchText)\"\r\n            @cancel=\"$router.back()\" \r\n            @focus=\"isResultShow=false\"\r\n        />\r\n      </form>\r\n        <!-- 搜索结果（特定的情况下出现） -->\r\n        <search-result \r\n            :search-text=\"searchText\"\r\n            v-if=\"isResultShow\"\r\n            >\r\n        </search-result>\r\n\r\n        <!-- 联想记录（特定的情况下出现） -->\r\n        <search-suggestion \r\n            v-else-if=\"searchText\"\r\n            :search-text=\"searchText\"\r\n            @search=\"onSearch\"\r\n        ></search-suggestion>\r\n\r\n        <!-- 历史记录（特定的情况下出现） -->\r\n        <search-history \r\n            v-else\r\n            :search-histories=\"searchHistories\"\r\n            @search=\"onSearch\"\r\n            @update-histories = \"searchHistories = $event\"\r\n            ></search-history>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport searchSuggestion from './components/search-suggestion'\r\nimport searchHistory from './components/search-history'\r\nimport searchResult from './components/search-result'\r\nimport { setItem,getItem } from '@/utils/stroage'\r\nimport { getSearchHistories } from '@/api/search'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n    name: 'SearchIndex',\r\n    components: {\r\n        searchSuggestion,\r\n        searchHistory,\r\n        searchResult\r\n    },\r\n    computed: {\r\n        ...mapState(['user'])\r\n    },\r\n    data() {\r\n        return {\r\n            searchText:'', //输入的搜索内容\r\n            isResultShow: false, //控制搜索结果的显示状态\r\n            searchHistories: getItem('search-histories') || []  //搜索历史记录\r\n        }\r\n    },\r\n    created() {\r\n        this.loadSearchHistories();\r\n    },\r\n    watch: {\r\n        searchHistories () {\r\n            setItem('search-histories',this.searchHistories);\r\n        }\r\n    },\r\n    methods: {\r\n        onSearch(searchText) {\r\n            this.searchText = searchText;\r\n            //数组去重的方法1（原始的）\r\n            //indexOf返回的是查询到的索引号\r\n            const index = this.searchHistories.indexOf(searchText);\r\n            if( index !== -1) {\r\n                //说明查到了相同的，就把数据删除掉\r\n                this.searchHistories.splice(index,1);\r\n            }\r\n            //触发搜索记录搜索历史记录\r\n            this.searchHistories.unshift(searchText);\r\n\r\n            //数据持久化，这里要注意如果登录了后端会自动把搜索记录存入\r\n            //没有登录就存本地，但是这里登录了也存本地\r\n            setItem('search-histories',this.searchHistories);\r\n            //搜索的时候触发的事件\r\n            this.isResultShow =true;//搜索结果的展示\r\n        },\r\n        async loadSearchHistories() {\r\n            //登录的情况下获取线上历史记录+本地历史\r\n            let searchHistories = getItem('search-histories') || [];\r\n            // if(this.user){//登录的情况下\r\n            //     const { data } = await getSearchHistories();\r\n            //     //data为线上返回的搜索记录\r\n            //     searchHistories = [...new Set([\r\n            //         ...searchHistories,\r\n            //         ...data.data.keywords\r\n            //     ])]\r\n            // }\r\n            this.searchHistories = searchHistories\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    .search_container {\r\n        font-size: 18px;\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5dfc90e9&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5dfc90e9&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5dfc90e9\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d4c0e5b"],{2423:function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l}));var a=n("b775"),r=n("4360"),c=function(e){return Object(a["a"])({method:"GET",url:"api/v1/news/getnewslist",params:e})},s=function(e){return Object(a["a"])({method:"GET",url:"/api/v1/news/getnewsinfo",params:e,headers:{token:"".concat(r["a"].state.user.token)}})},i=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/collect/collect",data:e,headers:{token:"".concat(r["a"].state.user.token)}})},o=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/collect/del",data:e,headers:{token:"".concat(r["a"].state.user.token)}})},u=function(e){return Object(a["a"])({method:"GET",url:"/api/v1/news/upvote",params:e,headers:{token:"".concat(r["a"].state.user.token)}})},l=function(e){return Object(a["a"])({method:"GET",url:"/api/v1/news/delUpvote",params:e,headers:{token:"".concat(r["a"].state.user.token)}})}},"2a78":function(e,t,n){"use strict";var a=n("5a49"),r=n.n(a);r.a},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),c="["+r+"]",s=RegExp("^"+c+c+"*"),i=RegExp(c+c+"*$"),o=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(i,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},"5a49":function(e,t,n){},"5e11":function(e,t,n){},"6ea2":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-cell",{staticClass:"article-item",on:{click:function(t){return e.goToDetail(e.article.id)}}},[n("div",{staticClass:"title van-multi-ellipsis--l3",attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.article.title))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("div",{staticClass:"label-wrap"},[n("span",[e._v(e._s(e.article.author))]),n("span",[e._v(e._s(e.article.upvote)+"点赞")]),n("span",[e._v(e._s(e._f("relativeTime")(e.article.update_time)))])])]),n("van-image",{staticClass:"right-cover",attrs:{fit:"cover",src:e.article.image_url}})],1)},r=[],c={name:"ArticleItem",props:{article:{type:Object,required:!0}},methods:{goToDetail:function(e){this.$router.push("/article/".concat(e))}}},s=c,i=(n("9897"),n("2877")),o=Object(i["a"])(s,a,r,!1,null,"aa477a34",null);t["a"]=o.exports},"7abe":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-container"},[n("van-nav-bar",{staticClass:"app-nav-bar"},[n("van-button",{staticClass:"search-btn",attrs:{slot:"title",icon:"search",type:"info",round:"",size:"small",to:"search"},slot:"title"},[e._v("搜索")])],1),n("van-tabs",{staticClass:"channel-tabs",model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.channels,(function(e){return n("van-tab",{key:e.id,attrs:{title:e.cname}},[n("article-list",{attrs:{channel:e}})],1)})),n("div",{staticClass:"emptyDiv",attrs:{slot:"nav-right"},slot:"nav-right"}),n("div",{attrs:{slot:"nav-right"},slot:"nav-right"},[n("van-icon",{staticClass:"wap-nav-wrap",attrs:{name:"bars"},on:{click:function(t){e.isChannelEditShow=!0}}})],1)],2),n("van-popup",{staticClass:"channel-edit-popup",staticStyle:{height:"70%"},attrs:{position:"bottom",closeable:"",round:"","get-container":"body"},model:{value:e.isChannelEditShow,callback:function(t){e.isChannelEditShow=t},expression:"isChannelEditShow"}},[n("keep-alive",[n("channel-edit",{attrs:{active:e.active,"recommend-channels":e.channels},on:{close:function(t){e.isChannelEditShow=!1},"update-active":e.onUpdateActive}})],1)],1)],1)},r=[],c=(n("96cf"),n("1da1")),s=n("5530"),i=n("c24f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"article-list",staticClass:"article-list"},[n("van-pull-refresh",{attrs:{"success-text":e.refreshSuccessText,"success-duration":1500},on:{refresh:e.onRefresh},model:{value:e.isRefreshLoading,callback:function(t){e.isRefreshLoading=t},expression:"isRefreshLoading"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.articles,(function(e,t){return n("article-item",{key:t,attrs:{article:e}})})),1)],1)],1)},u=[],l=n("2909"),d=n("2423"),f=n("6ea2"),h=n("2ef0"),p={name:"ArticleList",props:{channel:{type:Object,required:!0}},components:{ArticleItem:f["a"]},data:function(){return{articles:[],loading:!1,finished:!1,timestamp:null,isRefreshLoading:!1,refreshSuccessText:"",scrollTop:0,page:1}},methods:{onLoad:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["f"])({cid:e.channel.id,page:e.page});case 2:a=t.sent,r=a.data,(n=e.articles).push.apply(n,Object(l["a"])(r)),e.loading=!1,r.length?e.page++:e.finished=!0;case 7:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["f"])({cid:e.channel.id,page:e.page});case 2:a=t.sent,r=a.data,c=r,(n=e.articles).unshift.apply(n,Object(l["a"])(c)),e.isRefreshLoading=!1,e.refreshSuccessText="刷新成功";case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this,t=this.$refs["article-list"];t.onscroll=Object(h["debounce"])((function(){e.scrollTop=t.scrollTop}),50)},activated:function(){this.$refs["article-list"].scrollTop=this.scrollTop}},v=p,m=(n("b07b"),n("2877")),b=Object(m["a"])(v,o,u,!1,null,"5e92453d",null),g=b.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel-edit"},[n("div",{staticClass:"empty"}),n("div",{staticClass:"main"},[n("van-cell",{attrs:{center:"",border:!1}},[n("div",{staticClass:"channel-title",attrs:{slot:"title"},slot:"title"},[e._v("我的频道")]),n("van-button",{staticClass:"edit-button",attrs:{type:"danger",plain:"",round:"",size:"mini"},on:{click:function(t){e.isEdit=!e.isEdit}}},[e._v(e._s(e.isEdit?"完成":"编辑"))])],1),n("van-grid",{attrs:{gutter:10}},e._l(e.userChannels,(function(t,a){return n("van-grid-item",{key:a,staticClass:"grid-item ",attrs:{icon:e.isEdit?"clear":"",text:t.cname},on:{click:function(n){return e.onUserChannelClick(t,a,t.id-1)}}})})),1),n("van-cell",{attrs:{center:"",border:!1}},[n("div",{staticClass:"channel-title",attrs:{slot:"title"},slot:"title"},[e._v("频道推荐")])]),n("van-grid",{attrs:{gutter:10}},e._l(e.recommendChannels,(function(t,a){return n("van-grid-item",{key:a,staticClass:"grid-item",attrs:{text:"+ "+t.cname},on:{click:function(n){return e.onAdd(t)}}})})),1)],1)])},O=[],C=(n("a434"),n("a9e3"),n("b775")),j=n("4360"),w=function(){return Object(C["a"])({method:"GET",url:"/api/v1/category/getcategorylist"})},E=function(e){return Object(C["a"])({method:"POST",url:"/api/v1/category/addcategory",params:e,headers:{token:"".concat(j["a"].state.user.token)}})},x=function(e){return Object(C["a"])({method:"POST",url:"/api/v1/category/delcategory",data:e,headers:{token:"".concat(j["a"].state.user.token)}})},T=n("2f62"),_=n("d17a"),y={name:"ChannelEdit",data:function(){return{allChannels:[],isEdit:!1,userChannels:[]}},computed:Object(s["a"])({},Object(T["b"])(["user"])),props:{recommendChannels:{type:Array,required:!0},active:{type:Number,required:!0}},created:function(){this.loadAllChannels()},methods:{loadAllChannels:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:n=t.sent,console.log(n),e.allChannels=n.data;case 5:case"end":return t.stop()}}),t)})))()},onAdd:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!t.user){n.next=7;break}return n.next=4,E({cids:e.id,token:t.user.token});case 4:t.userChannels.push(e),n.next=8;break;case 7:Object(_["b"])("channels",t.userChannels);case 8:t.$toast("添加频道成功"),n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](0),console.log(n.t0),t.$toast("添加频道失败");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))()},onUserChannelClick:function(e,t,n){this.isEdit?this.deleteChannel(e,t):this.switchChannel(n)},deleteChannel:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(t),t<=n.active&&n.$emit("update-active",n.active+1),n.userChannels.splice(t,1),!n.user){a.next=10;break}return console.log(e.id),a.next=7,x({cid:e.id,token:n.user.token});case 7:console.log(123456789),a.next=12;break;case 10:Object(_["b"])("channels",n.userChannels),console.log(987654321);case 12:case"end":return a.stop()}}),a)})))()},switchChannel:function(e){this.$emit("update-active",e),this.$emit("close")}}},S=y,R=(n("dbb5"),Object(m["a"])(S,k,O,!1,null,"b95ef0fe",null)),A=R.exports,I={name:"HomeIndex",components:{ArticleList:g,ChannelEdit:A},computed:Object(s["a"])({},Object(T["b"])(["user"])),data:function(){return{active:0,channels:[],isChannelEditShow:!1}},created:function(){this.loadChanels()},methods:{loadChanels:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[],!e.user){t.next=8;break}return t.next=4,Object(i["e"])();case 4:a=t.sent,n=a.data,t.next=17;break;case 8:if(r=Object(_["a"])("channels"),!r){t.next=13;break}n=r,t.next=17;break;case 13:return t.next=15,Object(i["e"])();case 15:c=t.sent,n=c.data;case 17:e.channels=n;case 18:case"end":return t.stop()}}),t)})))()},onUpdateActive:function(e){this.active=e}}},N=I,G=(n("2a78"),Object(m["a"])(N,a,r,!1,null,"6bd6c3f0",null));t["default"]=G.exports},9897:function(e,t,n){"use strict";var a=n("c879"),r=n.n(a);r.a},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),c=n("94ca"),s=n("6eeb"),i=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),f=n("7c73"),h=n("241c").f,p=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,b="Number",g=r[b],k=g.prototype,O=o(f(k))==b,C=function(e){var t,n,a,r,c,s,i,o,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=m(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(c=u.slice(2),s=c.length,i=0;i<s;i++)if(o=c.charCodeAt(i),o<48||o>r)return NaN;return parseInt(c,a)}return+u};if(c(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var j,w=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof w&&(O?d((function(){k.valueOf.call(n)})):o(n)!=b)?u(new g(C(t)),n,w):C(t)},E=a?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;E.length>x;x++)i(g,j=E[x])&&!i(w,j)&&v(w,j,p(g,j));w.prototype=k,k.constructor=w,s(r,b,w)}},b07b:function(e,t,n){"use strict";var a=n("e53c"),r=n.n(a);r.a},c24f:function(e,t,n){"use strict";n.d(t,"m",(function(){return c})),n.d(t,"l",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"n",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"o",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"i",(function(){return v})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return b})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return k}));var a=n("b775"),r=n("4360"),c=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/user/register",data:e})},s=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/user/login",data:e})},i=function(e){return Object(a["a"])({method:"GET",url:"/api/v1/token/gettoken?uid=".concat(e)})},o=function(e){return Object(a["a"])({method:"GET",url:"api/v1/email/getcode?email=".concat(e)})},u=function(){return Object(a["a"])({method:"GET",url:"/api/v1/user/info",headers:{token:"".concat(r["a"].state.user.token)}})},l=function(){return Object(a["a"])({method:"GET",url:"/api/v1/category/getcategorylist"})},d=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/relation/follow",data:{follow_id:e,token:"".concat(r["a"].state.user.token)},headers:{token:"".concat(r["a"].state.user.token)}})},f=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/relation/del",data:{follow_id:e,token:"".concat(r["a"].state.user.token)},headers:{token:"".concat(r["a"].state.user.token)}})},h=function(e){return Object(a["a"])({method:"POST",url:"/api/v1/user/edit",data:e,headers:{token:"".concat(r["a"].state.user.token)}})},p=function(e){return Object(a["a"])({methods:"POST",url:"/api/v1/collect/collectlist",data:e,headers:{token:"".concat(r["a"].state.user.token)}})},v=function(e){return Object(a["a"])({methods:"GET",url:"api/v1/news/getnewslist",params:e})},m=function(e){return Object(a["a"])({methods:"GET",url:"/api/v1/relation/followlist",params:e,headers:{token:"".concat(r["a"].state.user.token)}})},b=function(e){return Object(a["a"])({methods:"GET",url:"/api/v1/relation/fanslist",params:e,headers:{token:"".concat(r["a"].state.user.token)}})},g=function(){return Object(a["a"])({methods:"GET",url:"/api/v1/user/upvotesum",headers:{token:"".concat(r["a"].state.user.token)}})},k=function(e){return Object(a["a"])({methods:"GET",url:"/api/v1/news/user_news_list",params:e,headers:{token:"".concat(r["a"].state.user.token)}})}},c879:function(e,t,n){},dbb5:function(e,t,n){"use strict";var a=n("5e11"),r=n.n(a);r.a},e53c:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2d4c0e5b.a40ea053.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14cfca16"],{"794f":function(e,t,n){},c24f:function(e,t,n){"use strict";n.d(t,"m",(function(){return o})),n.d(t,"l",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"n",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"o",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"j",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return w})),n.d(t,"k",(function(){return b}));var r=n("b775"),a=n("4360"),o=function(e){return Object(r["a"])({method:"POST",url:"/api/v1/user/register",data:e})},s=function(e){return Object(r["a"])({method:"POST",url:"/api/v1/user/login",data:e})},u=function(e){return Object(r["a"])({method:"GET",url:"/api/v1/token/gettoken?uid=".concat(e)})},c=function(e){return Object(r["a"])({method:"GET",url:"api/v1/email/getcode?email=".concat(e)})},i=function(){return Object(r["a"])({method:"GET",url:"/api/v1/user/info",headers:{token:"".concat(a["a"].state.user.token)}})},l=function(){return Object(r["a"])({method:"GET",url:"/api/v1/category/getcategorylist"})},d=function(e){return Object(r["a"])({method:"POST",url:"/api/v1/relation/follow",data:{follow_id:e,token:"".concat(a["a"].state.user.token)},headers:{token:"".concat(a["a"].state.user.token)}})},f=function(e){return Object(r["a"])({method:"POST",url:"/api/v1/relation/del",data:{follow_id:e,token:"".concat(a["a"].state.user.token)},headers:{token:"".concat(a["a"].state.user.token)}})},m=function(e){return Object(r["a"])({method:"POST",url:"/api/v1/user/edit",data:e,headers:{token:"".concat(a["a"].state.user.token)}})},p=function(e){return Object(r["a"])({methods:"GET",url:"/app/v1_0/user/articles",params:e})},h=function(e){return Object(r["a"])({methods:"POST",url:"/api/v1/collect/collectlist",data:e,headers:{token:"".concat(a["a"].state.user.token)}})},v=function(e){return Object(r["a"])({methods:"GET",url:"/app/v1_0/user/histories",params:e})},g=function(e){return Object(r["a"])({methods:"GET",url:"/api/v1/relation/followlist",params:e,headers:{token:"".concat(a["a"].state.user.token)}})},w=function(e){return Object(r["a"])({methods:"GET",url:"/api/v1/relation/fanslist",params:e,headers:{token:"".concat(a["a"].state.user.token)}})},b=function(){return Object(r["a"])({methods:"GET",url:"/api/v1/user/upvotesum",headers:{token:"".concat(a["a"].state.user.token)}})}},ccc6:function(e,t,n){"use strict";var r=n("794f"),a=n.n(r);a.a},d5c2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"register-container"},[n("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:"注册","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),n("van-form",{ref:"login-form",staticClass:"main_container",attrs:{"show-error":!1,"show-error-message":!1,"validate-first":""},on:{submit:e.onLogin,failed:e.onFailed}},[n("van-field",{attrs:{"left-icon":"user-o",placeholder:"请输入邮箱",name:"email",center:"",rules:e.formRules.email},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),n("van-field",{attrs:{"icon-prefix":"toutiao",clearable:"","left-icon":"shouji",placeholder:"请输入验证码",name:"code",center:"",rules:e.formRules.code},scopedSlots:e._u([{key:"button",fn:function(){return[e.isCountDownShow?n("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(t){e.isCountDownShow=!1}}}):n("van-button",{staticClass:"send-btn",attrs:{size:"small",round:"",loading:e.isSendSmsLoading},on:{click:function(t){return t.preventDefault(),e.onSendSms(t)}}},[e._v("发送邮箱 ")])]},proxy:!0}]),model:{value:e.user.code,callback:function(t){e.$set(e.user,"code",t)},expression:"user.code"}}),n("van-field",{attrs:{"icon-prefix":"toutiao","left-icon":"yanzhengma",placeholder:"请输入密码",name:"password",center:"",rules:e.formRules.password},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("van-field",{attrs:{"icon-prefix":"toutiao","left-icon":"yanzhengma",placeholder:"请确认密码",name:"re_password",center:"",rules:e.formRules.re_password},model:{value:e.user.re_password,callback:function(t){e.$set(e.user,"re_password",t)},expression:"user.re_password"}}),n("div",{staticClass:"login-btn-wrap"},[n("van-button",{staticClass:"login-btn",attrs:{type:"warning",block:"",round:""}},[e._v("新用户注册")])],1)],1)],1)},a=[],o=(n("96cf"),n("1da1")),s=n("c24f"),u={name:"registerIndex",methods:{onLogin:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$toast.loading({duration:0,forbidClick:!0,message:"登录中..."}),e.password===e.re_password){t.next=4;break}return e.$toast.fail("注册失败，密码不一致"),t.abrupt("return");case 4:return t.prev=4,t.next=7,Object(s["m"])(e.user);case 7:n=t.sent,r=n.data,console.log(r),e.$toast.success("注册成功"),e.$router.push("/login"),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),console.log("失败"),e.$toast.fail("注册失败，验证码错误");case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()},onFailed:function(e){e.errors[0]&&this.$toast({message:e.errors[0].message,position:"top"})},onSendSms:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs["login-form"].validate("email");case 3:return e.isSendSmsLoading=!0,t.next=6,Object(s["n"])(e.user.email);case 6:e.isCountDownShow=!0,t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](0),n="",console.log(t.t0.response.data),n=t.t0&&10010==t.t0.response.data.error_code?"用户已存在，请前往登陆":"email"===t.t0.name?t.t0.message:"发送失败，请稍后重试",e.$toast({message:n,position:"top"});case 15:e.isSendSmsLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[0,9]])})))()}},data:function(){return{user:{email:"",code:"",password:"",re_password:""},formRules:{email:[{required:!0,message:"请输入邮箱"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确邮箱号"}],code:[{required:!0,message:"请输入验证码"},{pattern:/^\d{4}$/,message:"请输入正确验证码"}],password:[{required:!0,message:"请输入密码"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/,message:"密码至少包含数字和英文，长度6-20"}],re_password:[{required:!0,message:"请输入密码"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/,message:"密码至少包含数字和英文，长度6-20"}]},isCountDownShow:!1,isSendSmsLoading:!1}}},c=u,i=(n("ccc6"),n("2877")),l=Object(i["a"])(c,r,a,!1,null,"44a0d0c7",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-14cfca16.f87322e5.js.map
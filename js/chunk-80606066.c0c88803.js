(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80606066"],{"03e7":function(t,e,n){"use strict";var a=n("acc1"),r=n.n(a);r.a},"466d":function(t,e,n){"use strict";var a=n("d784"),r=n("825a"),o=n("50c4"),s=n("1d80"),i=n("8aa5"),c=n("14c3");a("match",1,(function(t,e,n){return[function(e){var n=s(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,n):new RegExp(e)[t](String(n))},function(t){var a=n(e,t,this);if(a.done)return a.value;var s=r(t),u=String(this);if(!s.global)return c(s,u);var l=s.unicode;s.lastIndex=0;var d,f=[],g=0;while(null!==(d=c(s,u))){var m=String(d[0]);f[g]=m,""===m&&(s.lastIndex=i(u,o(s.lastIndex),l)),g++}return 0===g?null:f}]}))},"9ed6":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"loginCotain",staticClass:"login-container"},[a("van-nav-bar",{staticClass:"app-nav-bar",attrs:{title:"登录","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),a("van-image",{staticClass:"image_avatar",attrs:{round:"",src:"https://img01.yzcdn.cn/vant/cat.jpeg"}}),a("van-form",{ref:"login-form",staticClass:"main_container",attrs:{"show-error":!1,"show-error-message":!1,"validate-first":""},on:{submit:t.onLogin,failed:t.onFailed}},[a("van-field",{attrs:{"icon-prefix":"toutiao","left-icon":"shouji",placeholder:"请输入邮箱",name:"email",center:"",rules:t.formRules.email},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("van-field",{attrs:{"icon-prefix":"toutiao",clearable:"",type:"password","left-icon":"yanzhengma",placeholder:"请输入密码",name:"password",center:"",rules:t.formRules.password},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}}),a("div",{staticClass:"login-btn-wrap"},[a("van-button",{staticClass:"login-btn",attrs:{type:"info",block:"",round:""}},[t._v("登录")])],1),a("div",{staticClass:"register_text"},[t._v("还没有账号？"),a("span",{staticClass:"register_btn",on:{click:t.goResgister}},[t._v("点击注册")])])],1),a("div",{staticClass:"background_login",attrs:{hidden:t.bg}},[a("img",{attrs:{src:n("f1ee"),alt:""}})])],1)},r=[],o=(n("ac1f"),n("466d"),n("96cf"),n("1da1")),s=n("c24f"),i={name:"LoginIndex",watch:{},mounted:function(){var t=this,e=navigator.userAgent,n=(navigator.appVersion,!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/));this.originHight=this.$refs.loginCotain.clientHeight,window.onresize=function(){console.log(t.$refs.loginCotain.clientHeight),t.originHight==t.$refs.loginCotain.clientHeight?t.bg=!1:t.bg=!0},this.$refs.loginCotain.addEventListener("focusin",(function(){n&&(t.bg=!0)})),this.$refs.loginCotain.addEventListener("focusout",(function(){n&&(t.bg=!1)}))},destroyed:function(){window.onresize=null},methods:{onLogin:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,r,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$toast.loading({duration:0,forbidClick:!0,message:"登录中..."}),e.prev=1,e.next=4,Object(s["l"])(t.user);case 4:return n=e.sent,a=n.data,r=a.id,e.next=9,Object(s["d"])(r);case 9:o=e.sent,console.log(a),console.log(o),t.$toast.success("登录成功"),t.$store.commit("setUser",o.data),t.$router.push("/"),e.next=23;break;case 17:e.prev=17,e.t0=e["catch"](1),console.log("失败"),console.log(e.t0.response.data),i=e.t0.response.data.msg,e.t0&&t.$toast.fail(i);case 23:case"end":return e.stop()}}),e,null,[[1,17]])})))()},onFailed:function(t){t.errors[0]&&this.$toast({message:t.errors[0].message,position:"top"})},goResgister:function(){this.$router.push("/register")}},data:function(){return{originHight:0,linnerHight:0,bg:!1,user:{email:"",password:""},formRules:{email:[{required:!0,message:"请输入邮箱号"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,message:"请输入正确邮箱号"}],password:[{required:!0,message:"请输入密码"},{pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/,message:"请输入正确密码"}]},isCountDownShow:!1,isSendSmsLoading:!1}}},c=i,u=(n("03e7"),n("2877")),l=Object(u["a"])(c,a,r,!1,null,"30278823",null);e["default"]=l.exports},acc1:function(t,e,n){},c24f:function(t,e,n){"use strict";n.d(e,"m",(function(){return o})),n.d(e,"l",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"n",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"o",(function(){return g})),n.d(e,"f",(function(){return m})),n.d(e,"i",(function(){return p})),n.d(e,"h",(function(){return h})),n.d(e,"g",(function(){return v})),n.d(e,"j",(function(){return b})),n.d(e,"k",(function(){return k}));var a=n("b775"),r=n("4360"),o=function(t){return Object(a["a"])({method:"POST",url:"/api/v1/user/register",data:t})},s=function(t){return Object(a["a"])({method:"POST",url:"/api/v1/user/login",data:t})},i=function(t){return Object(a["a"])({method:"GET",url:"/api/v1/token/gettoken?uid=".concat(t)})},c=function(t){return Object(a["a"])({method:"GET",url:"api/v1/email/getcode?email=".concat(t)})},u=function(){return Object(a["a"])({method:"GET",url:"/api/v1/user/info",headers:{token:"".concat(r["a"].state.user.token)}})},l=function(){return Object(a["a"])({method:"GET",url:"/api/v1/category/getcategorylist"})},d=function(t){return Object(a["a"])({method:"POST",url:"/api/v1/relation/follow",data:{follow_id:t,token:"".concat(r["a"].state.user.token)},headers:{token:"".concat(r["a"].state.user.token)}})},f=function(t){return Object(a["a"])({method:"POST",url:"/api/v1/relation/del",data:{follow_id:t,token:"".concat(r["a"].state.user.token)},headers:{token:"".concat(r["a"].state.user.token)}})},g=function(t){return Object(a["a"])({method:"POST",url:"/api/v1/user/edit",data:t,headers:{token:"".concat(r["a"].state.user.token)}})},m=function(t){return Object(a["a"])({methods:"POST",url:"/api/v1/collect/collectlist",data:t,headers:{token:"".concat(r["a"].state.user.token)}})},p=function(t){return Object(a["a"])({methods:"GET",url:"api/v1/news/getnewslist",params:t})},h=function(t){return Object(a["a"])({methods:"GET",url:"/api/v1/relation/followlist",params:t,headers:{token:"".concat(r["a"].state.user.token)}})},v=function(t){return Object(a["a"])({methods:"GET",url:"/api/v1/relation/fanslist",params:t,headers:{token:"".concat(r["a"].state.user.token)}})},b=function(){return Object(a["a"])({methods:"GET",url:"/api/v1/user/upvotesum",headers:{token:"".concat(r["a"].state.user.token)}})},k=function(t){return Object(a["a"])({methods:"GET",url:"/api/v1/news/user_news_list",params:t,headers:{token:"".concat(r["a"].state.user.token)}})}},f1ee:function(t,e,n){t.exports=n.p+"img/loginBG.ace6c43e.png"}}]);
//# sourceMappingURL=chunk-80606066.c0c88803.js.map